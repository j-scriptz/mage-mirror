# _master.config - central configuration for install-mage-hyva.sh
#
# Copy this file to the project root and customize as needed.
# Any value here can be overridden by exporting a real environment variable
# before running ./install-mage-hyva.sh

# -----------------------------
# Core project & Magento basics
# -----------------------------

# Name of the Warden env / project (warden env-init <PROJECT_NAME> magento2)
PROJECT_NAME=mage

# Magento metapackage & version (fresh install + upgrade target)
MAGENTO_PACKAGE=magento/project-community-edition
# Use a Composer version constraint; 2.4.* resolves to the newest 2.4.x
MAGENTO_VERSION=2.4.*

# Admin frontname for Magento backend
ADMIN_FRONTNAME=mage_admin

# -----------------------------
# Install mode: existing DB vs fresh
# -----------------------------

# Use an existing DB + env.php/config.php instead of setup:install
#   yes  = always use existing DB (non-interactive)
#   no   = always run fresh install
#   ask  = prompt at runtime
USE_EXISTING_DB=ask

# When USE_EXISTING_DB=yes and NOT using remote DB dump, point to local files:
#   - DB dump (SQL file relative to project root)
#   - env.php (relative path)
#   - config.php (relative path)
EXISTING_DB_SQL=db/mage-multi-hyva.sql
EXISTING_ENV_PHP=config/env.php
EXISTING_CONFIG_PHP=config/config.php

# -----------------------------
# Sample data & Hyvä install
# -----------------------------

# WITH_SAMPLE_DATA:
#   yes  = always install sample data on fresh installs
#   no   = never install
#   ask  = prompt at runtime
WITH_SAMPLE_DATA=ask

# INSTALL_HYVA:
#   yes  = install Hyvä theme from OSS repos and set as default
#   no   = skip Hyvä install
#   ask  = prompt at runtime
INSTALL_HYVA=ask

# ENABLE_MULTISTORE:
#   yes  = configure app.${PROJECT_NAME}.test + ${PROJECT_NAME}.test with a secondary 'subcats' website
#   no   = single-store only (no subcats website or host-based routing)
#   ask  = prompt at runtime
ENABLE_MULTISTORE=ask

# UPGRADE_MAGENTO:
#   yes  = after importing existing code/DB, attempt composer-based Magento core upgrade
#   no   = skip upgrade and keep current version
#   ask  = prompt at runtime in existing-DB path
UPGRADE_MAGENTO=ask

# UPGRADE_MAGENTO_VERSION:
#   Target core version for upgrade. If empty, MAGENTO_VERSION is used.
#   Example: 2.4.* (newest 2.4.x), or a specific release like 2.4.7
UPGRADE_MAGENTO_VERSION=2.4.*


# -----------------------------
# Remote sync (rsync / tar over SSH)
# -----------------------------

# Use remote Magento code instead of composer create-project
#   yes  = always rsync from remote
#   no   = never rsync; always use composer locally
#   ask  = prompt at runtime if REMOTE_* is configured
USE_RSYNC_MAGENTO=ask

# How to combine rsync/tar + remote DB when using remote Magento:
#   ask       = prompt with menu (recommended)
#   (others are set internally by the script: everything | code_only | db_code | db_only)
USE_RSYNC_TAR_MAGENTO=ask

# Whether to pull the DB via remote mysqldump over SSH:
#   yes  = run mysqldump on remote host and pipe into warden db import
#   no   = use local SQL file (EXISTING_DB_SQL)
USE_REMOTE_DB_DUMP=no

# If you want to exclude pub/media from the tarball when copying code:
#   yes  = exclude pub/media (smaller tar, no media sync)
#   no   = include pub/media
EXCLUDE_MEDIA_FROM_TAR=no

# -----------------------------
# SSH / remote host settings
# -----------------------------

# Where the remote Magento instance lives
REMOTE_HOST=your.server.com
REMOTE_USER=sshuser
REMOTE_PATH=/var/www/html/magento

# Path to your PRIVATE SSH key on the host running this script
REMOTE_SSH_KEY=/Users/yourname/.ssh/id_ed25519

# Remote DB settings (used when USE_REMOTE_DB_DUMP=yes)
REMOTE_DB_HOST=127.0.0.1
REMOTE_DB_NAME=magento
REMOTE_DB_USER=magento
REMOTE_DB_PASSWORD=secret
REMOTE_DB_PORT=3306


# -----------------------------
# DEV FRIENDLY OPTIONS
# -----------------------------
DISABLE_TWOFACTOR_AUTH=true
MAGENTO_DEVELOPER_MODE=true
DISABLE_CONFIG_CACHE=true
DISABLE_FULLPAGE_CACHE=true

# -----------------------------
# URL / multi-store overrides
# -----------------------------

# By default the script will derive the Traefik domain + subdomain from Warden's .env
# after running `warden env-init ${PROJECT_NAME} magento2`. You usually don't need
# to set these manually, but you can override them here if desired:
# TRAEFIK_DOMAIN=mage.test
# TRAEFIK_SUBDOMAIN=app

# Base URL for the secondary "subcats" website (usually https://mage.test/)
# SUBCATS_URL=https://mage.test/

